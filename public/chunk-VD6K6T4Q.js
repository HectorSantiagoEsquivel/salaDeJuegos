import{a as j}from"./chunk-BWFQEKZQ.js";import{a as w}from"./chunk-CHNGLQXA.js";import"./chunk-PAP2UETD.js";import"./chunk-DVA2SMLH.js";import"./chunk-LJ5XHLMQ.js";import{j as M,m as I}from"./chunk-VX3KMHVW.js";import{$a as s,Da as x,N as v,Oa as b,S as C,Ua as i,Va as r,Wa as _,Ya as m,_a as k,ab as p,bb as O,k as g,o as f,sa as P,ua as a,y as h,za as d}from"./chunk-353TJUNG.js";import{f as S}from"./chunk-FK42CRUA.js";var u=S(j());var l=class c{constructor(n){this.http=n}obtenerPokemon(){let t=`https://pokeapi.co/api/v2/pokemon/${Math.floor(Math.random()*720)+1}`;return this.http.get(t).pipe(h(e=>(console.log(e),g(void 0))))}obtenerOpcionesPokemon(){return this.http.get("https://pokeapi.co/api/v2/pokemon/?limit=500").pipe(f(n=>n.results))}static \u0275fac=function(t){return new(t||c)(C(M))};static \u0275prov=v({token:c,factory:c.\u0275fac,providedIn:"root"})};var y=class c{constructor(n,t,e){this.preguntadosServ=n;this.puntajeService=t;this.router=e}pokemonCorrecto;pokemon;opcionUno;opcionDos;opcionTres;opcionCuatro;score=0;tiempoRestante=10;tiempoTerminado=!1;intervalId;mostrarImagen=!1;ngOnInit(){this.inicializarJuego(),this.iniciarContador()}inicializarJuego(){this.mostrarImagen=!1,this.preguntadosServ.obtenerPokemon().subscribe(n=>{this.pokemonCorrecto=n,this.preguntadosServ.obtenerOpcionesPokemon().subscribe(t=>{this.pokemon=t,this.seleccionarOpciones()})})}iniciarContador(){this.intervalId=setInterval(()=>{this.tiempoRestante-=1,this.tiempoRestante===0&&(clearInterval(this.intervalId),this.tiempoRestante=0,this.verificarTiempo())},1e3)}detenerContador(){clearInterval(this.intervalId)}seleccionarOpciones(){let n=this.pokemon.filter(o=>o.id!==this.pokemonCorrecto?.id),t=[],e=new Set;for(;t.length<3;){let o=Math.floor(Math.random()*n.length);e.has(o)||(t.push(n[o]),e.add(o))}t.push(this.pokemonCorrecto),t.sort(()=>.5-Math.random()),this.opcionUno=t[0].name,this.opcionDos=t[1].name,this.opcionTres=t[2].name,this.opcionCuatro=t[3].name}verificarTiempo(){return this.tiempoRestante===0?(this.finalizarJuego(),!0):!1}finalizarJuego(){this.detenerContador(),this.puntajeService.guardarPuntos("preguntados",this.score),u.default.fire({icon:"info",title:"Juego Terminado",html:`
          <div style="font-size: 1.2rem; margin-bottom: 1rem;">
            Tu puntuaci\xF3n: <strong>${this.score}</strong>
          </div>
          <div>\xBFQu\xE9 te gustar\xEDa hacer ahora?</div>
        `,showCancelButton:!0,confirmButtonText:"Jugar de Nuevo",cancelButtonText:"Volver al Men\xFA",reverseButtons:!0,backdrop:!0,allowOutsideClick:!1,customClass:{popup:"swal-custom-popup",title:"swal-custom-title"}}).then(n=>{n.isConfirmed?this.reiniciarJuego():n.dismiss===u.default.DismissReason.cancel&&this.volverAlHome()})}verificarRespuesta(n){n===this.pokemonCorrecto?.name?(this.mostrarImagen=!0,this.detenerContador(),setTimeout(()=>{this.score++,this.mostrarImagen=!1,this.tiempoRestante++,this.inicializarJuego(),this.iniciarContador()},1e3)):this.finalizarJuego()}actualizarImagen(){return this.pokemonCorrecto?.sprites.front_default}reiniciarJuego(){window.location.reload()}volverAlHome(){this.router.navigateByUrl("/home")}ngOnDestroy(){this.detenerContador()}static \u0275fac=function(t){return new(t||c)(d(l),d(w),d(I))};static \u0275cmp=x({type:c,selectors:[["app-preguntados"]],decls:23,vars:9,consts:[[1,"contenido"],[1,"juego"],[1,"espacioJuego"],[1,"espacioPregunta"],[1,"texto"],[1,"imagen"],[2,"width","300px","height","300px",3,"src"],[1,"cantidades"],[1,"puntos"],[1,"timer"],[1,"opciones"],[1,"opcion",3,"click"]],template:function(t,e){t&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),s(5,"\xBFQui\xE9n es ese Pok\xE9mon?"),r(),i(6,"div",5),_(7,"img",6),r()(),i(8,"div",7)(9,"h2",8),s(10),r()(),i(11,"div",9)(12,"h2"),s(13),r()(),i(14,"div",10)(15,"button",11),m("click",function(){return e.verificarRespuesta(e.opcionUno)}),s(16),r(),i(17,"button",11),m("click",function(){return e.verificarRespuesta(e.opcionDos)}),s(18),r(),i(19,"button",11),m("click",function(){return e.verificarRespuesta(e.opcionTres)}),s(20),r(),i(21,"button",11),m("click",function(){return e.verificarRespuesta(e.opcionCuatro)}),s(22),r()()()()()),t&2&&(a(7),b("revealed",e.mostrarImagen),k("src",e.actualizarImagen(),P),a(3),O("Puntos: ",e.score,""),a(3),p(e.tiempoRestante),a(3),p(e.opcionUno),a(2),p(e.opcionDos),a(2),p(e.opcionTres),a(2),p(e.opcionCuatro))},styles:[".contenido[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:calc(100vh - 40px);padding:20px;background-color:#f6f6f6;font-family:Poppins,sans-serif}.juego[_ngcontent-%COMP%]{width:100%;max-width:800px;background:#fff;border-radius:10px;box-shadow:0 0 20px #0000001a;padding:30px;position:relative}.espacioJuego[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.espacioPregunta[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.espacioPregunta[_ngcontent-%COMP%]   .texto[_ngcontent-%COMP%]{color:#0d0d0d;font-size:24px;margin-bottom:20px;font-weight:600}.imagen[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:0 auto;background-color:#f0f0f0;border-radius:8px;padding:10px;box-shadow:inset 0 0 10px #0000001a}.imagen[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:contain;border-radius:4px;filter:brightness(0) saturate(100%);transition:filter .3s ease}.imagen[_ngcontent-%COMP%]   img.revealed[_ngcontent-%COMP%]{filter:none}.cantidades[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:10px}.cantidades[_ngcontent-%COMP%]   .puntos[_ngcontent-%COMP%]{color:#56baed;font-size:18px;font-weight:600}.timer[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;background-color:#ff6b6b;color:#fff;width:60px;height:60px;border-radius:50%;display:flex;justify-content:center;align-items:center;font-size:24px;font-weight:700;box-shadow:0 0 10px #ff6b6b80}.opciones[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:15px;margin-top:20px}.opciones[_ngcontent-%COMP%]   .opcion[_ngcontent-%COMP%]{padding:15px;border:none;border-radius:5px;background-color:#56baed;color:#fff;font-size:16px;font-family:Poppins,sans-serif;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 6px #0000001a}.opciones[_ngcontent-%COMP%]   .opcion[_ngcontent-%COMP%]:hover{background-color:#28a7e8;transform:translateY(-2px)}.opciones[_ngcontent-%COMP%]   .opcion[_ngcontent-%COMP%]:active{transform:translateY(0)}@media (max-width: 768px){.opciones[_ngcontent-%COMP%]{grid-template-columns:1fr}.juego[_ngcontent-%COMP%]{padding:20px}.imagen[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:250px;height:250px}}@media (max-width: 480px){.contenido[_ngcontent-%COMP%]{padding:10px}.imagen[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:200px;height:200px}.timer[_ngcontent-%COMP%]{width:50px;height:50px;font-size:20px}}"]})};export{y as PreguntadosComponent};
