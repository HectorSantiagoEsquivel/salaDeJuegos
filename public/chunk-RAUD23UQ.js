import{c as N,e as z}from"./chunk-GJSAA4OQ.js";import{a as j}from"./chunk-BWFQEKZQ.js";import{a as I}from"./chunk-PZZQTLVG.js";import"./chunk-IIMLSVJ5.js";import"./chunk-DVA2SMLH.js";import"./chunk-LJ5XHLMQ.js";import{e as k,g as y,h as S,m as D}from"./chunk-VX3KMHVW.js";import{$a as c,Da as b,Ha as h,Na as d,Oa as x,Ua as s,Va as a,Wa as C,Xa as f,Ya as u,Z as l,Za as m,_ as p,ab as w,bb as v,kb as P,na as O,ua as o,za as g}from"./chunk-353TJUNG.js";import{f as V,h as M}from"./chunk-FK42CRUA.js";var _=V(j());function E(i,t){if(i&1){let e=f();s(0,"div",7)(1,"button",8),u("click",function(){l(e);let r=m();return p(r.startGame())}),c(2,"Comenzar Juego"),a()()}}function G(i,t){if(i&1&&(s(0,"div",19)(1,"h2"),c(2,"Pr\xF3xima Carta:"),a(),C(3,"app-card",12),a()),i&2){let e=m(2);o(3),d("card",e.nextCard)("visible",!0)}}function B(i,t){if(i&1){let e=f();s(0,"div",9)(1,"div",10)(2,"div",11)(3,"h2"),c(4,"Carta Actual:"),a(),C(5,"app-card",12),a(),h(6,G,4,2,"div",13),a(),s(7,"div",14)(8,"button",8),u("click",function(){l(e);let r=m();return p(!r.gameOver&&!r.showNextCard&&r.makeGuess(!0))}),c(9," Mayor "),a(),s(10,"button",8),u("click",function(){l(e);let r=m();return p(!r.gameOver&&!r.showNextCard&&r.makeGuess(!1))}),c(11," Menor "),a()(),s(12,"div",15),c(13),a(),s(14,"div",16)(15,"div",17),c(16),a(),s(17,"div",18),c(18),a()()()}if(i&2){let e=m();o(5),d("card",e.currentCard)("visible",!0),o(),d("ngIf",e.showNextCard&&e.nextCard),o(2),x("disabled",e.gameOver||e.showNextCard),o(2),x("disabled",e.gameOver||e.showNextCard),o(3),w(e.message),o(3),v("Puntuaci\xF3n: ",e.score,""),o(2),v("Cartas restantes: ",e.deck.length,"")}}function $(i,t){if(i&1){let e=f();s(0,"div",20)(1,"button",8),u("click",function(){l(e);let r=m();return p(r.initializeGame())}),c(2,"Jugar de Nuevo"),a()()}}var R=class i{constructor(t,e,n,r,T){this.deckService=t;this.changeDetectorRef=e;this.puntajeService=n;this.router=r;this.isBrowser=S(T)}isBrowser=!1;deck=[];currentCard=void 0;nextCard=null;score=0;gameStarted=!1;gameOver=!1;message="";showNextCard=!1;ngOnInit(){this.isBrowser&&this.initializeGame()}initializeGame(){this.deck=this.deckService.generateDeck("spade","black",13).concat(this.deckService.generateDeck("heart","red",13)).concat(this.deckService.generateDeck("diamond","red",13)).concat(this.deckService.generateDeck("club","black",13)),this.deck=this.deckService.shuffle(this.deck),this.score=0,this.gameStarted=!1,this.gameOver=!1,this.showNextCard=!1,this.message='Press "Start Game" to begin',this.changeDetectorRef.detectChanges()}startGame(){if(this.deck.length<2){this.message="Not enough cards in the deck";return}this.gameStarted=!0,this.gameOver=!1,this.currentCard=this.deck.pop(),this.nextCard=null,this.showNextCard=!1,this.message=`La carta actual es ${this.getCardName(this.currentCard)} \xBFLa proxima sera mayor o menor?`,this.changeDetectorRef.detectChanges()}makeGuess(t){return M(this,null,function*(){if(!this.currentCard||this.gameOver)return;if(this.deck.length===0){this.endGame();return}this.nextCard=this.deck.pop(),this.showNextCard=!0,this.changeDetectorRef.detectChanges(),yield new Promise(r=>setTimeout(r,1e3));let e=this.getCardValue(this.currentCard),n=this.getCardValue(this.nextCard);e===n?this.message="\xA1Empate!":t&&n>e||!t&&n<e?(this.score++,this.message=`Correcto ${this.getCardName(this.nextCard)} es ${n>e?"mayor":"menor"}`):this.message=`Incorrecto ${this.getCardName(this.nextCard)} es ${n>e?"mayor":"menor"}`,this.currentCard=this.nextCard,this.nextCard=null,this.deck.length===0?this.endGame():setTimeout(()=>{this.showNextCard=!1,this.changeDetectorRef.detectChanges()},100),this.changeDetectorRef.detectChanges()})}endGame(){this.gameOver=!0,this.puntajeService.guardarPuntos("mayorOmenor",this.score),_.default.fire({icon:"info",title:"Juego Terminado",html:`
        <div style="font-size: 1.2rem; margin-bottom: 1rem;">
          Tu puntuaci\xF3n: <strong>${this.score}</strong>
        </div>
        <div>\xBFQu\xE9 te gustar\xEDa hacer ahora?</div>
      `,showCancelButton:!0,confirmButtonText:"Jugar de Nuevo",cancelButtonText:"Volver al Men\xFA",reverseButtons:!0,backdrop:!0,allowOutsideClick:!1,customClass:{popup:"swal-custom-popup",title:"swal-custom-title"}}).then(t=>{t.isConfirmed?this.reiniciarJuego():t.dismiss===_.default.DismissReason.cancel&&this.volverAlHome()}),this.changeDetectorRef.detectChanges()}getCardValue(t){return t.number}reiniciarJuego(){window.location.reload()}volverAlHome(){this.router.navigateByUrl("/home")}getCardName(t){let e={1:"As",11:"Jota",12:"Reina",13:"Rey"},n={spade:"Picas",heart:"Corazones",diamond:"Diamantes",club:"Treboles"};return`${e[t.number]||t.number.toString()} de ${n[t.type]}`}static \u0275fac=function(e){return new(e||i)(g(z),g(P),g(I),g(D),g(O))};static \u0275cmp=b({type:i,selectors:[["app-mayor-o-menor"]],decls:9,vars:3,consts:[[1,"game-table"],[1,"wooden-frame"],[1,"green-felt-surface"],[1,"game-container"],["class","start-screen",4,"ngIf"],["class","game-screen",4,"ngIf"],["class","game-over",4,"ngIf"],[1,"start-screen"],[3,"click"],[1,"game-screen"],[1,"cards-row"],[1,"current-card"],[3,"card","visible"],["class","next-card",4,"ngIf"],[1,"controls"],[1,"message"],[1,"info-row"],[1,"score"],[1,"cards-left"],[1,"next-card"],[1,"game-over"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1"),c(5,"Mayor o Menor"),a(),h(6,E,3,0,"div",4)(7,B,19,10,"div",5)(8,$,3,0,"div",6),a()()()()),e&2&&(o(6),d("ngIf",!n.gameStarted&&!n.gameOver),o(),d("ngIf",n.gameStarted),o(),d("ngIf",n.gameOver))},dependencies:[y,k,N],styles:[`@charset "UTF-8";.game-table[_ngcontent-%COMP%]{width:100%;min-height:100vh;padding:20px;background:#56baed;display:flex;justify-content:center;align-items:center;box-sizing:border-box}.wooden-frame[_ngcontent-%COMP%]{width:100%;max-width:800px;padding:15px;background:#5d4037;border-radius:15px;box-shadow:0 10px 30px #00000080;background-image:linear-gradient(to right,#5e4237cc,#4c342bcc),url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><path d="M0,50 L100,50 M50,0 L50,100" stroke="%233e2723" stroke-width="1" opacity="0.3"/></svg>')}.green-felt-surface[_ngcontent-%COMP%]{width:100%;background:#0a5c36;border-radius:8px;padding:25px;box-sizing:border-box;position:relative;overflow:hidden}.green-felt-surface[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:radial-gradient(circle at 20% 30%,rgba(255,255,255,.1) 0%,transparent 25%),radial-gradient(circle at 80% 70%,rgba(255,255,255,.1) 0%,transparent 25%)}.game-container[_ngcontent-%COMP%]{width:100%;max-width:100%;margin:0 auto;text-align:center;font-family:Arial,sans-serif;position:relative;z-index:2;color:#fff}.game-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:1.5rem;color:#fff;text-shadow:0 2px 4px rgba(0,0,0,.5);font-size:2.2rem}.start-screen[_ngcontent-%COMP%]{margin:2rem 0}.start-screen[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1.2rem;padding:12px 25px}.game-screen[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1.5rem}.cards-row[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:3rem;width:100%;margin-bottom:1rem;flex-wrap:wrap}@media (max-width: 600px){.cards-row[_ngcontent-%COMP%]{flex-direction:column;align-items:center;gap:1.5rem}}.current-card[_ngcontent-%COMP%], .next-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;min-width:160px;transition:all .3s ease}.current-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .next-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:.8rem;color:#fff;font-size:1.3rem;text-shadow:0 1px 2px rgba(0,0,0,.5)}.current-card[_ngcontent-%COMP%]   app-card[_ngcontent-%COMP%], .next-card[_ngcontent-%COMP%]   app-card[_ngcontent-%COMP%]{transition:transform .3s}.current-card[_ngcontent-%COMP%]   app-card[_ngcontent-%COMP%]:hover, .next-card[_ngcontent-%COMP%]   app-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px) scale(1.03)}.controls[_ngcontent-%COMP%]{display:flex;gap:1.5rem;margin-top:1rem}.controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:120px;font-size:1.1rem;padding:12px 20px;letter-spacing:.5px}@media (max-width: 500px){.controls[_ngcontent-%COMP%]{flex-direction:column;gap:.8rem;width:100%;max-width:250px}.controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}.message[_ngcontent-%COMP%]{margin:1.5rem 0;font-size:1.2rem;min-height:50px;color:#fff;text-shadow:0 1px 2px rgba(0,0,0,.5);padding:.8rem 1.2rem;background:#0003;border-radius:8px;max-width:90%}.info-row[_ngcontent-%COMP%]{display:flex;justify-content:space-around;width:100%;max-width:500px;margin-top:1rem;font-size:1.1rem;gap:1.5rem}.info-row[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{background:#5d4037b3;padding:.6rem 1.2rem;border-radius:6px;min-width:160px}@media (max-width: 500px){.info-row[_ngcontent-%COMP%]{flex-direction:column;align-items:center;gap:.8rem}}.game-over[_ngcontent-%COMP%]{margin:2rem 0}.game-over[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1.2rem;padding:12px 30px;background-color:#8d6e63}.game-over[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#6d4c41}button[_ngcontent-%COMP%]{padding:10px 20px;margin:10px;font-size:1rem;cursor:pointer;background-color:#5d4037;color:#fff;border:none;border-radius:6px;box-shadow:0 4px #3e2723;transition:all .2s}button[_ngcontent-%COMP%]:hover{background-color:#4e342e;transform:translateY(-2px);box-shadow:0 6px #3e2723}button[_ngcontent-%COMP%]:active{transform:translateY(1px);box-shadow:0 3px #3e2723}@keyframes _ngcontent-%COMP%_cardReveal{0%{transform:scale(.9);opacity:0}to{transform:scale(1);opacity:1}}.next-card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_cardReveal .5s ease-out}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1)}50%{transform:scale(1.05)}to{transform:scale(1)}}.congratulations[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s infinite}@media (max-width: 768px){.wooden-frame[_ngcontent-%COMP%]{padding:12px}.green-felt-surface[_ngcontent-%COMP%]{padding:20px}.game-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.8rem}}@media (max-width: 480px){.game-table[_ngcontent-%COMP%]{padding:15px 10px}.wooden-frame[_ngcontent-%COMP%]{padding:10px}.green-felt-surface[_ngcontent-%COMP%]{padding:15px}.cards-row[_ngcontent-%COMP%]{gap:1.2rem}.message[_ngcontent-%COMP%]{font-size:1rem;padding:.6rem 1rem}}`],changeDetection:0})};export{R as MayorOMenorComponent};
